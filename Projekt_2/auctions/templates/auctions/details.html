{% extends "auctions/layout.html" %}

{% block body %}

<div class="container-fluid w-75 border border-secondary px-0 rounded">
    {% for message in messages %}
        <div class="alert alert-success" role="alert">
            {{ message }}
        </div>
    {% endfor %}
    <h1 class="my-4 text-center">My Listing</h1>
    <div class="container col-md-6 col-md-offset-3">
        <img src= {{ listing.imageURL }}  class="img-fluid">
        {% if request.user.id in listing.watchers.all %}
            <h4><span class="badge badge-secondary p-2 ">Watchlist</span></h4>
        {% endif %}
    </div>

    <h1 class="display-4 mt-4"><strong>{{ listing.currentPrice }} â‚¬</strong></h1>
    <p> 
        {{ listing.bids.all|length }} bid(s) so far
        {% if listing.currentPrice == highestBid %}
            Your bid is the current bid.
        {% endif %}
    </p>

    <form action="{% url 'details' listing.id %}" method="post">
        {% csrf_token %}
        <div class="form-group w-25">
            <input class="form-control" type="text" name="bid" placeholder="Bid">
        </div>
        <input class="btn btn-primary" name="placeBid" type="submit" value="Place Bid">
        {% if not request.user.id in listing.watchers.all %}
            <input class="btn btn-secondary" name="addToWL" type="submit" value="Add to Watchlist">
        {% endif %}
    </form>

</div>
        
{% endblock %}